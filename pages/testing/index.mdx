---
title: Testing Guide
description: Comprehensive guide to testing your application
---

# Testing Guide

This guide covers different types of testing and best practices for ensuring code quality.

## Testing Overview

The project uses PHPUnit for testing and supports:

- Unit Tests
- Integration Tests
- Feature Tests
- Browser Tests

## Unit Testing

### Writing Unit Tests

```php
namespace Tests\Unit;

use PHPUnit\Framework\TestCase;
use App\Services\Calculator;

class CalculatorTest extends TestCase
{
    private Calculator $calculator;

    protected function setUp(): void
    {
        $this->calculator = new Calculator();
    }

    public function test_it_adds_two_numbers()
    {
        $result = $this->calculator->add(2, 3);
        $this->assertEquals(5, $result);
    }

    public function test_it_throws_exception_for_invalid_input()
    {
        $this->expectException(\InvalidArgumentException::class);
        $this->calculator->divide(5, 0);
    }
}
```

### Mocking Dependencies

```php
use Mockery;
use App\Services\PaymentGateway;

class OrderServiceTest extends TestCase
{
    public function test_it_processes_order()
    {
        $paymentGateway = Mockery::mock(PaymentGateway::class);
        $paymentGateway->shouldReceive('charge')
            ->once()
            ->with(100)
            ->andReturn(true);

        $orderService = new OrderService($paymentGateway);
        $result = $orderService->process(['amount' => 100]);

        $this->assertTrue($result);
    }
}
```

## Integration Testing

### Database Testing

```php
namespace Tests\Integration;

use Tests\TestCase;
use App\Models\User;
use Illuminate\Foundation\Testing\RefreshDatabase;

class UserRepositoryTest extends TestCase
{
    use RefreshDatabase;

    public function test_it_creates_user()
    {
        $data = [
            'name' => 'John Doe',
            'email' => 'john@example.com',
            'password' => 'password'
        ];

        $user = User::create($data);

        $this->assertDatabaseHas('users', [
            'email' => 'john@example.com'
        ]);
    }
}
```

### API Testing

```php
class ApiTest extends TestCase
{
    public function test_it_returns_users_list()
    {
        $response = $this->get('/api/users');

        $response
            ->assertStatus(200)
            ->assertJsonStructure([
                'data' => [
                    '*' => ['id', 'name', 'email']
                ]
            ]);
    }
}
```

## Feature Testing

### Testing HTTP Requests

```php
class UserControllerTest extends TestCase
{
    public function test_user_can_register()
    {
        $response = $this->post('/register', [
            'name' => 'John Doe',
            'email' => 'john@example.com',
            'password' => 'password',
            'password_confirmation' => 'password'
        ]);

        $response->assertRedirect('/dashboard');
        $this->assertAuthenticated();
    }
}
```

## Test Data Factories

### Model Factories

```php
namespace Database\Factories;

use App\Models\User;
use Illuminate\Database\Eloquent\Factories\Factory;

class UserFactory extends Factory
{
    protected $model = User::class;

    public function definition()
    {
        return [
            'name' => $this->faker->name(),
            'email' => $this->faker->unique()->safeEmail(),
            'password' => bcrypt('password'),
        ];
    }
}
```

## Testing Best Practices

### 1. Test Organization

```
tests/
├── Unit/           # Unit tests
├── Integration/    # Integration tests
├── Feature/        # Feature tests
└── Browser/        # Browser tests
```

### 2. Naming Conventions

```php
public function test_it_does_something() // Use descriptive names
public function test_it_throws_exception_when_invalid() // Describe expected behavior
```

### 3. Test Data Management

```php
class TestCase extends BaseTestCase
{
    protected function setUp(): void
    {
        parent::setUp();
        $this->seed(TestDatabaseSeeder::class);
    }
}
```

## Running Tests

### Running All Tests

```bash
./vendor/bin/phpunit
```

### Running Specific Tests

```bash
# Run a specific test file
./vendor/bin/phpunit tests/Unit/UserTest.php

# Run tests with specific pattern
./vendor/bin/phpunit --filter test_it_creates_user

# Run tests with coverage report
./vendor/bin/phpunit --coverage-html coverage
```

## Continuous Integration

### GitHub Actions Example

```yaml
name: Tests

on: [push, pull_request]

jobs:
  tests:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
      - name: Setup PHP
        uses: shivammathur/setup-php@v2
        with:
          php-version: "8.1"
      - name: Install Dependencies
        run: composer install
      - name: Execute tests
        run: vendor/bin/phpunit
```

## Next Steps

- Learn about [Code Coverage](/testing/code-coverage)
- Explore [Browser Testing](/testing/browser-testing)
- Set up [Continuous Integration](/testing/ci-cd)
